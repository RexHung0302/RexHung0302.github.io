<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"rexhung0302.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Introduction &amp; 前言 這是一篇將 前端(Vue) + 後端(Node.js) + 資料庫(MySQL) 部署至 Linode 的踩坑全記錄，這篇需要一點事前準備，如果你手邊剛好有前端專案 (純 HTML 也可以) ，又剛好有後端專案，恰巧你也有資料庫，然後你也想要把作品呈現給其他人看，這篇文章就非常適合你。 如果不是，也可以先參考筆者以下文章  [NodeJS Become">
<meta property="og:type" content="article">
<meta property="og:title" content="[Third party service Note] - 全端手動部署 VPS(VM) 踩坑全記錄 By Vue + Node.js + Nginx + MySQL8 + CentOS Stream 9">
<meta property="og:url" content="https://rexhung0302.github.io/2025/02/18/20250218/index.html">
<meta property="og:site_name" content="RexHung&#39;s Blog">
<meta property="og:description" content="Introduction &amp; 前言 這是一篇將 前端(Vue) + 後端(Node.js) + 資料庫(MySQL) 部署至 Linode 的踩坑全記錄，這篇需要一點事前準備，如果你手邊剛好有前端專案 (純 HTML 也可以) ，又剛好有後端專案，恰巧你也有資料庫，然後你也想要把作品呈現給其他人看，這篇文章就非常適合你。 如果不是，也可以先參考筆者以下文章  [NodeJS Become">
<meta property="og:locale" content="zh_TW">
<meta property="og:image" content="https://rexhung0302.github.io/images/others/loading.gif">
<meta property="og:image" content="https://rexhung0302.github.io/images/others/loading.gif">
<meta property="og:image" content="https://rexhung0302.github.io/images/others/loading.gif">
<meta property="og:image" content="https://rexhung0302.github.io/images/others/loading.gif">
<meta property="og:image" content="https://rexhung0302.github.io/images/others/loading.gif">
<meta property="og:image" content="https://rexhung0302.github.io/images/others/loading.gif">
<meta property="og:image" content="https://rexhung0302.github.io/images/others/loading.gif">
<meta property="og:image" content="https://rexhung0302.github.io/images/others/loading.gif">
<meta property="og:image" content="https://rexhung0302.github.io/images/others/loading.gif">
<meta property="og:image" content="https://rexhung0302.github.io/images/others/loading.gif">
<meta property="og:image" content="https://rexhung0302.github.io/images/others/loading.gif">
<meta property="og:image" content="https://rexhung0302.github.io/images/others/loading.gif">
<meta property="og:image" content="https://rexhung0302.github.io/images/others/loading.gif">
<meta property="og:image" content="https://rexhung0302.github.io/images/others/loading.gif">
<meta property="og:image" content="https://rexhung0302.github.io/images/others/loading.gif">
<meta property="og:image" content="https://rexhung0302.github.io/images/others/loading.gif">
<meta property="og:image" content="https://rexhung0302.github.io/images/others/loading.gif">
<meta property="og:image" content="https://rexhung0302.github.io/images/others/loading.gif">
<meta property="og:image" content="https://rexhung0302.github.io/images/others/loading.gif">
<meta property="og:image" content="https://rexhung0302.github.io/images/others/loading.gif">
<meta property="og:image" content="https://rexhung0302.github.io/images/others/loading.gif">
<meta property="og:image" content="https://rexhung0302.github.io/images/others/loading.gif">
<meta property="og:image" content="https://rexhung0302.github.io/images/others/loading.gif">
<meta property="og:image" content="https://rexhung0302.github.io/images/others/loading.gif">
<meta property="og:image" content="https://rexhung0302.github.io/images/others/loading.gif">
<meta property="article:published_time" content="2025-02-18T14:15:00.000Z">
<meta property="article:modified_time" content="2025-03-08T18:04:59.013Z">
<meta property="article:author" content="RexHung">
<meta property="article:tag" content="Note">
<meta property="article:tag" content="Third party service">
<meta property="article:tag" content="Linode">
<meta property="article:tag" content="DigitalOcean">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://rexhung0302.github.io/images/others/loading.gif">

<link rel="canonical" href="https://rexhung0302.github.io/2025/02/18/20250218/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-TW'
  };
</script>

  <title>[Third party service Note] - 全端手動部署 VPS(VM) 踩坑全記錄 By Vue + Node.js + Nginx + MySQL8 + CentOS Stream 9 | RexHung's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切換導航欄">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">RexHung's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">塵世中一個前端迷途小書僮!</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首頁</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>關於</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>標籤</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分類</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>歸檔</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜尋
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜尋..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/RexHung0302" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="https://rexhung0302.github.io/2025/02/18/20250218/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/profile/profile_2.png">
      <meta itemprop="name" content="RexHung">
      <meta itemprop="description" content="努力不一定會成功, 不努力一定很輕鬆！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RexHung's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          [Third party service Note] - 全端手動部署 VPS(VM) 踩坑全記錄 By Vue + Node.js + Nginx + MySQL8 + CentOS Stream 9
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2025-02-18 22:15:00" itemprop="dateCreated datePublished" datetime="2025-02-18T22:15:00+08:00">2025-02-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2025-03-09 02:04:59" itemprop="dateModified" datetime="2025-03-09T02:04:59+08:00">2025-03-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Code/" itemprop="url" rel="index"><span itemprop="name">Code</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Code/Note/" itemprop="url" rel="index"><span itemprop="name">Note</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Code/Note/Third-Party-Service/" itemprop="url" rel="index"><span itemprop="name">Third Party Service</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Code/Note/Third-Party-Service/Linode/" itemprop="url" rel="index"><span itemprop="name">Linode</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="文章字數">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">文章字數：</span>
              <span>7.9k</span>
            </span>
            <span class="post-meta-item" title="所需閱讀時間">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">所需閱讀時間 &asymp;</span>
              <span>7 分鐘</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="Introduction-前言"><a href="#Introduction-前言" class="headerlink" title="Introduction &amp; 前言"></a>Introduction &amp; 前言</h2><p><img src="/images/others/loading.gif" data-original="/images/20250218/banner.png" alt="Banner"></p>
<p>這是一篇將 <code>前端(Vue) + 後端(Node.js) + 資料庫(MySQL)</code> 部署至 <strong>Linode</strong> 的踩坑全記錄，這篇需要一點事前準備，如果你手邊剛好有前端專案 <strong>(純 HTML 也可以)</strong> ，又剛好有後端專案，恰巧你也有資料庫，然後你也想要把作品呈現給其他人看，這篇文章就非常適合你。</p>
<p>如果不是，也可以先參考筆者以下文章</p>
<ul>
<li><a href="https://rexhung0302.github.io/2020/09/14/20200914/">[NodeJS Become A Full Stack Developer] — Express、Router 及 EJS 入門淺談</a> -&gt; 學習後端語言 Node.js</li>
<li><a href="https://rexhung0302.github.io/2020/11/09/20201109/">[NodeJS Become A Full Stack Developer] — NodeJS ORM Sequelize Cli 串接資料庫</a> -&gt; 學習後端語言 Node.js 及 操作資料庫</li>
</ul>
<span id="more"></span>

<p><em><strong>整篇文章是筆者自己的心得，如果文內有錯誤的地方，還請盡情指出。</strong></em></p>
<p>此篇筆記起因是因為筆者在之前有透過 <strong>VPS Linode</strong> 部署全端專案，而當時使用的是 <strong>CentOS 6</strong> ，該版本已經不再維護了，可參考 <a target="_blank" rel="noopener" href="https://support.cpanel.net/hc/en-us/articles/360058490254--CentOS-6-End-of-Life-Notice">CentOS 6 - End of Life Notice</a> ，近期因為機器上專案出了一些問題，筆者乾脆重新開一台新的機器重新跑一次部署流程。</p>
<p>第一次部署的文章在此 <strong><a href="https://rexhung0302.github.io/page/3/">[Third party service Note] - Vue + Node.js + Nginx + MySQL5.7, 第一次使用 VPS(Linode, DigitalOcean) 就可能會碰到的問題之如何簡單上手</a></strong> ，因為內容有些過時了，這次順便更新一次會碰到的東西，基本流程都差不多，但有些東西更新了，下面會提到更新的內容。</p>
<p>很多時候一件事情第一次做就是矇矇懂懂，第二次會發現原來第一次好多東西是這麼愚蠢竟然弄錯，但是總會在第二次對事情印象深刻甚至學習到更多東西。</p>
<hr>
<h2 id="Summary-摘要"><a href="#Summary-摘要" class="headerlink" title="Summary &amp; 摘要"></a>Summary &amp; 摘要</h2><p>本篇文章預設學習前的基本條件需求：</p>
<ul>
<li>知道如何操作終端機 及 知道一些基本指令</li>
<li>至少擁有 HTML 檔案拿來部署</li>
<li>擁有後端專案(本篇以 Node.js 為例)</li>
<li>知道怎麼用後端串聯資料庫(本篇不會提到怎麼創建或者串接)</li>
<li>至少先看過 <a href="https://rexhung0302.github.io/page/3/">[Third party service Note] - Vue + Node.js + Nginx + MySQL5.7, 第一次使用 VPS(Linode, DigitalOcean) 就可能會碰到的問題之如何簡單上手</a>，但可以先看一下接下來有更新的部分，這些部分可以透過新的文章去實作</li>
</ul>
<p>本篇文章更新的部分：</p>
<ul>
<li>虛擬機作業系統從 CentOS 6 更新為 CentOS Stream 9</li>
<li>MySQL5.7 更新為 8</li>
<li>Nginx 依舊使用預設安裝最新版本(不影響舊文章的操作流程)</li>
</ul>
<p>本篇文章將有以下幾個步驟:</p>
<ol>
<li><a href="#%E7%B6%B2%E5%9F%9F%E9%83%A8%E5%88%86">網域部分</a></li>
<li><a href="#%E4%B8%BB%E6%A9%9F%E5%8F%8A%E9%83%A8%E7%BD%B2">主機及部署</a></li>
<li><a href="#%E6%96%B0%E5%A2%9ESSH">新增SSH</a></li>
<li><a href="#%E5%BB%BA%E7%BD%AE%E7%92%B0%E5%A2%83">建置環境</a></li>
<li><a href="#%E9%97%9C%E6%96%BCNginx">關於Nginx</a></li>
<li><a href="#%E6%8A%93%E5%8F%96%E5%B0%88%E6%A1%88">抓取專案</a></li>
<li><a href="#%E9%85%8D%E7%BD%AE%E8%B3%87%E6%96%99%E5%BA%AB">配置資料庫</a></li>
<li><a href="#%E9%98%B2%E7%81%AB%E7%89%86%E8%A8%AD%E5%AE%9A">防火牆設定</a></li>
<li><a href="#%E9%85%8D%E7%BD%AESSL">配置SSL</a></li>
<li><a href="#%E9%97%9C%E6%96%BC%E6%AC%8A%E9%99%90%E5%95%8F%E9%A1%8C">關於權限問題</a></li>
<li><a href="#%E9%A1%8D%E5%A4%96%E5%95%8F%E9%A1%8C">額外問題</a></li>
</ol>
<hr>
<h3 id="網域部分"><a href="#網域部分" class="headerlink" title="網域部分"></a>網域部分</h3><p>首先是網域的部分，基本上挑自己喜歡的網域商即可，目前比較多人使用的是 <strong><a target="_blank" rel="noopener" href="https://tw.godaddy.com/?isc=rowzh&cdtl=ctv_ytv&cdtl=c_17401504217.g_.a_.d_c.ctv_x&gad_source=1&gclid=CjwKCAiA2cu9BhBhEiwAft6IxCxAGA3RhpmQocmzcjg55gOdQZfxm8IM9osi2RqvQu-aTzWrcOxwXhoC0vwQAvD_BwE">GoDaddy</a></strong> ，其餘的如果你覺得評價不錯，價格公道，都可以考慮。</p>
<p><em><strong>關於網域商可以考慮此篇文章：<a target="_blank" rel="noopener" href="https://notjustdesigner.com/choose-domain-registrar/">【建站教學#3】如何選擇網域商？2021前六大網域商比較</a></strong></em></p>
<p><img src="/images/others/loading.gif" data-original="/images/20250218/very-cool.png" alt="very cool"></p>
<p>這邊以 <strong>GoDaddy</strong> 為例，到網站後輸入想要購買的網域名稱就可以查詢價格，例如你想要購買的網域是 <strong>veryCool</strong> ，就輸入查詢。</p>
<p><img src="/images/others/loading.gif" data-original="/images/20250218/very-cool-url-price-list.png" alt="very cool price list"></p>
<p>之後就能查看價格是多少，有的網站可以一次購買一年份，有的一次一個月為單位也可以，但請記得網域只會越來越貴，每年價格都會有所調漲，基本結尾是 <code>.com .tw</code> 這種也會比較貴。</p>
<p><img src="/images/others/loading.gif" data-original="/images/20250218/dns.png" alt="dns"></p>
<p>網域申請一個後就可以透過子網域去對應綁定多個想要呈現給使用者看的網頁，可以查看上面這張圖，怎麼配置的話可以參考舊的文章內有寫到，這邊就不多做提及了。</p>
<hr>
<h3 id="主機及部署"><a href="#主機及部署" class="headerlink" title="主機及部署"></a>主機及部署</h3><p>購買好網域後，就可以選擇 <strong>VPS</strong> 主機商，這些主機商會提供虛擬主機給你存放專案，可以想像就是一台電腦主機，然後你把你做好的網頁或者專案丟到該電腦上去運行，這些電腦因為不是真的是一台 <strong>Mac</strong> 或者 <strong>Windows</strong> 主機，是透過一台大的主機去切分出來的多台小主機空間，稱為虛擬主機。</p>
<p>基本上 VPS 最有名的大家基本有聽過的肯定是 <strong>AWS</strong> 或者 <strong>GCP</strong> 等等，這些都可以選擇，筆者這邊依舊使用舊文章就使用的 <strong>Linode</strong> ，如果想選擇其他服務商可以參考 <strong><a target="_blank" rel="noopener" href="https://www.fuwu7.com/overseas-vps/6014.html">2025年国外VPS排行榜：前十名最好的国外VPS排名</a></strong> 。</p>
<p><img src="/images/others/loading.gif" data-original="/images/20250218/linode-price.png" alt="Linode Price"></p>
<p>這邊提一下 <strong>Linode</strong> 的優勢，<strong>便宜、老牌、穩定</strong> ，基本上一個月最便宜共享主機方案為 <strong>5</strong> 美金，如上圖，約莫 <strong>163.70</strong> 台幣，少叫一餐 <strong>UberEat</strong> 就有空間可以丟作品去找工作了，划！！</p>
<p><img src="/images/others/loading.gif" data-original="/images/20250218/USD-TWD.png" alt="USD TWD"></p>
<p>當然大牌如 <strong>AWS</strong> 或者 <strong>GCP</strong> 等等一定比較貴，但是他們服務也比較多元，如果不想要像文章一樣手動部署安裝這麼麻煩多的東西，可以選擇大牌的服務商，他們在官方網頁內會有類似 <strong>網域、資料庫、網域代理…</strong> 等等的服務可以選，不需要自己再上去機器安裝配置，付錢就搞定！</p>
<p><img src="/images/others/loading.gif" data-original="/images/20250218/pay-meme.png" alt="Take My Money"></p>
<hr>
<h3 id="新增SSH"><a href="#新增SSH" class="headerlink" title="新增SSH"></a>新增SSH</h3><p>關於 <strong>SSH</strong> 如果不明白可以參考此篇文章 <strong><a target="_blank" rel="noopener" href="https://ithelp.ithome.com.tw/articles/10277498">Day21：【技術篇】SSH 的基本運作原理</a></strong> ，基本可以理解為你有一組帳號及密碼，帳號是大家都能看到的，而帳號可以丟到你想連線或者操作的網站去，例如 <strong>GitLab</strong> 或 <strong>GitHub</strong> 等等，而你想要對該網站進行操作例如抓取專案，就可以拿密碼去讓網站知道是你本人，不是駭客，這樣就可以進行操作了。</p>
<p><img src="/images/others/loading.gif" data-original="/images/20250218/ssh-workflow.png" alt="SSH Workflow"></p>
<p>擁有 <strong>SSH</strong> 就無需使用帳號密碼去驗證，在任何提供 <strong>SSH</strong> 的網站都可以使用這個功能去進行操作。</p>
<p><strong>But</strong>！請記得謹慎添加 <strong>SSH</strong> ，基本上在本機我們都會創建一組 <strong>SSH</strong> 用到底，哪個網站需要我們就用本機創建好的 <strong>id_rsa.pub(SSH 創建後如果沒有自行命名，預設名稱是 id_rsa.pub)</strong> 放到網站上，這基本是沒問題的，因為自己電腦比較不容易讓 <strong>id_rsa</strong> 外洩，但今天我們是要在虛擬主機上進行 <strong>SSH</strong> 拉取專案，如果主機上使用跟本機一樣的 <strong>SSH</strong> ，如果虛擬主機上的 <strong>SSH</strong> 外洩了，會比較麻煩，會需要多個使用到的網站都一起更新。</p>
<p>想避免上面情況，這樣我們不如直接在主機上創建一組新的 <strong>SSH</strong> ，並且該 <strong>SSH</strong> 專門只給該虛擬主機使用。</p>
<p><img src="/images/others/loading.gif" data-original="/images/20250218/launch-lISH-console.png" alt="Launch LISH Console"></p>
<p>我們主機開好後透過服務商網站提供的方式進入虛擬主機，然後到主機內執行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen</span><br></pre></td></tr></table></figure>

<p>這時候會提示創建了一組 <strong>SSH</strong> 在主機內，基本上會放在 <code>~/.ssh/</code> 這個資料夾，可以執行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cat ~/.ssh/id_rsa.pub</span><br></pre></td></tr></table></figure>

<p><img src="/images/others/loading.gif" data-original="/images/20250218/id-rsa-pub.png" alt="Launch LISH Console"></p>
<p>然後把文字貼到你的遠程倉庫去，例如 <strong>GitLab</strong> 或 <strong>GitHub</strong></p>
<p><em><strong>備註：請記得你的服務商網站頁面內應該也有 SSH 可以新增，這邊請新增你本機電腦的，因為你之後是要從本機透過終端機 ssh 快速連進虛擬主機，但進到虛擬主機後再虛擬主機進行 git pull 是要用另一組去 GitLab 或者 GitHub 拉取的，如果真的覺得太麻煩，也可以都共用同一組沒問題。</strong></em></p>
<h4 id="關於本機連不上"><a href="#關於本機連不上" class="headerlink" title="關於本機連不上"></a>關於本機連不上</h4><p>如果本機透過 <strong>ssh</strong> 連不上虛擬機，可以先透過服務商的網頁進入虛擬主機，然後使用以下指令去嘗試</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sshd -t</span><br></pre></td></tr></table></figure>

<p>如果沒有開啟 <strong>ssh</strong> 服務可以使用以下指令去新增，新增前請先透過 <code>firewall-cmd --list-all</code> 去查看是不是 <strong>ssh</strong> 有被加入在 <strong>services</strong> ，如果沒有請使用以下指令加入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ firewall-cmd --permanent --zone=public --add-service=mysql</span><br><span class="line">$ firewall-cmd --reload</span><br></pre></td></tr></table></figure>

<p><img src="/images/others/loading.gif" data-original="/images/20250218/ssh-too-open.png" alt="SSH Too Open"></p>
<p>如果出現上圖代表你的 <strong>ssh</strong> 權限太高，只需要輸入 <code>chmod 400 ~/.ssh/id_rsa</code> 或 <code>chmod 600 ~/.ssh/id_rsa</code> 即可解決</p>
<hr>
<h3 id="建置環境"><a href="#建置環境" class="headerlink" title="建置環境"></a>建置環境</h3><p>接著是比較重要的部分，主機需要安裝一些你專案必須的</p>
<p>除了 <strong>Git</strong> 及 <strong>Nginx</strong> 必裝之外，其他就是看你的專案，如果你是都包裝在 <strong>Docker</strong> 內，也可以都不需要裝，但是 <strong>Git</strong> 需要拿來拉取遠端倉庫專案，所以必須要裝。</p>
<p>安裝的部分有興趣都可以參考舊文章，如果有不確定怎麼安裝的部分也可以透過關鍵字查詢 <code>centOS Stream 9 install xxx</code>，這邊就不詳細解釋怎麼安裝，不過筆者可以提供幾個文章供參考</p>
<ul>
<li>Git<ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_35995691/article/details/143378707">CentOS 9 Stream 上安装 Git</a></li>
<li><a target="_blank" rel="noopener" href="https://reintech.io/blog/installing-configuring-git-centos-9">Installing and Configuring Git on CentOS 9</a></li>
</ul>
</li>
<li>Nginx<ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_42599091/article/details/138250977">CentOS 9 (stream) 安装 nginx</a></li>
</ul>
</li>
<li>Nvm<ul>
<li><a target="_blank" rel="noopener" href="https://tecadmin.net/how-to-install-nvm-on-centos-stream-9/">How to Install NVM on CentOS Stream 9 &amp; RHEL 9</a></li>
<li><a target="_blank" rel="noopener" href="https://wiki.crowncloud.net/?How_to_Install_Node_JS_on_CentOS_Stream_9">How to Install Node.js on CentOS Stream 9</a></li>
</ul>
</li>
<li>Sequelize<ul>
<li>先裝好 <strong>NVM</strong> 後，在透過 <code>npm install -g sequelize sequelize-cli</code> 安裝</li>
</ul>
</li>
<li>MySQL2<ul>
<li><a target="_blank" rel="noopener" href="https://www.hostinger.com/tutorials/how-to-install-mysql-on-centos">How to Install MySQL on CentOS 9 Stream</a></li>
<li><a target="_blank" rel="noopener" href="https://reintech.io/blog/secure-mysql-installation-centos-9">Secure MySQL Installation on CentOS 9</a></li>
</ul>
</li>
</ul>
<p><em><strong>備註：關於 nvm 的介紹可以參考 <a target="_blank" rel="noopener" href="https://titangene.github.io/article/nvm.html">nvm：安裝、切換不同 Node.js 版本的管理器</a> 文章，簡易解釋 nvm 就是 node 的版本管理工具</strong></em></p>
<p><img src="/images/others/loading.gif" data-original="/images/20250218/ssh-connect-refused.png" alt="Install Git"></p>
<p>基本上在 <strong>CentOS Stream 9</strong> 內安裝都是靠 <strong>dnf</strong> ，大多數文章開頭都會請你先執行 <code>dnf update -y</code>，加上 <strong>-y</strong> 是預設安裝回答都是 <strong>yes</strong> ，如上圖就是在執行安裝 <strong>Git</strong></p>
<hr>
<h3 id="關於Nginx"><a href="#關於Nginx" class="headerlink" title="關於Nginx"></a>關於Nginx</h3><p>關於 Nginx 的配置可以參考之前的舊文章 <strong><a href="https://rexhung0302.github.io/page/3/">[Third party service Note] - Vue + Node.js + Nginx + MySQL5.7, 第一次使用 VPS(Linode, DigitalOcean) 就可能會碰到的問題之如何簡單上手</a></strong> ，基本上只要最後輸入 nginx -t 沒問題，應該都不會有什麼額外狀況。</p>
<p>基本上如果訪問機器一直看不到網頁，請先找到 <strong>nginx</strong> 的 <strong>error.log</strong> 存放位置，使用 <code>cat /etc/nginx/nginx.conf</code>，然後找到下面這行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># For more information on configuration, see:</span><br><span class="line">#   * Official English Documentation: http://nginx.org/en/docs/</span><br><span class="line">#   * Official Russian Documentation: http://nginx.org/ru/docs/</span><br><span class="line"></span><br><span class="line">user nginx;</span><br><span class="line">worker_processes auto;</span><br><span class="line">error_log /var/log/nginx/error.log; // &lt;- 找到這行</span><br><span class="line">pid /run/nginx.pid;</span><br><span class="line"></span><br><span class="line"># Load dynamic modules. See /usr/share/doc/nginx/README.dynamic.</span><br><span class="line">include /usr/share/nginx/modules/*.conf</span><br><span class="line"></span><br><span class="line">//...下略</span><br></pre></td></tr></table></figure>

<p>找到後使用 <code>vi /var/log/nginx/error.log</code> 查看錯誤是什麼去仔細排除即可。</p>
<hr>
<h3 id="抓取專案"><a href="#抓取專案" class="headerlink" title="抓取專案"></a>抓取專案</h3><p><img src="/images/others/loading.gif" data-original="/images/20250218/first-git-clonse.png" alt="First Git Clone"></p>
<p><strong>Git</strong> 安裝完畢就可以透過 <code>git clone</code> 去抓取專案了，而第一次會出現 <code>The authenticity of host &#39;gitlab.com(xxx.xxx.xxx)&#39; can&#39;t be established.</code> 是正常的，輸入 <strong>yes</strong> 之後，後續就不會再出現了。</p>
<hr>
<h3 id="配置資料庫"><a href="#配置資料庫" class="headerlink" title="配置資料庫"></a>配置資料庫</h3><p>前面我們安裝完了資料庫，因為是安裝 <strong>MySQL8</strong> 有些東西需要先配置，<strong>MySQL</strong> 安裝完畢後，在終端機輸入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mysql -u root -h localhost -p</span><br></pre></td></tr></table></figure>

<p>接著終端機會出現</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">// Enter password: 這邊接著輸入密碼</span><br></pre></td></tr></table></figure>

<p>接下來需要允許可以遠端登入，與 MySQL5.7 比較不同的地方是原本舊版是直接輸入以下指令就可以</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mysql&gt; grant all privileges on *.* to &#x27;使用者名稱&#x27;@&#x27;IP位置&#x27; identified by&#x27;要登入的密碼&#x27;;</span><br></pre></td></tr></table></figure>

<p>但你會發現一直都連不上，對於 <strong>MySQL8</strong> 新增方式需要改為先創建用戶，可參考 <strong><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/50177216/how-to-grant-all-privileges-to-root-user-in-mysql-8-0">How to grant all privileges to root user in MySQL 8.0</a></strong> 。</p>
<p>如果遠端登入也是使用 root 就不需要再創建新的使用者，可以直接忽略掉下面 <code>CREATE USER &#39;root&#39;@&#39;%&#39; IDENTIFIED BY &#39;PASSWORD&#39;;</code> 這段。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; CREATE USER &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;PASSWORD&#x27;;</span><br><span class="line">mysql&gt; GRANT ALL PRIVILEGES ON *.* TO &#x27;root&#x27;@&#x27;%&#x27; WITH GRANT OPTION;</span><br><span class="line">mysql&gt; FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure>

<p>這時候再去連線應該就能連得上了，可以執行 <strong>migrate</strong> 之類的初始化資料庫操作囉。</p>
<h4 id="資料庫連不上"><a href="#資料庫連不上" class="headerlink" title="資料庫連不上"></a>資料庫連不上</h4><p>遠端透過 <strong>GUI</strong> 或者指令資料庫連不上的話，下面會講到防火牆及權限問題，但也有可能是 <strong>SELinux</strong> 問題，關於這問題 ChatGPT 有給出回答，因為筆者非這塊專業，所以提供資訊，相關可能需要請另外爬文。</p>
<p><img src="/images/others/loading.gif" data-original="/images/20250218/SELinux.png" alt="SELinux"></p>
<p>另外也可能是出現 <code>Permission denied</code> 的問題，可以參考 <strong><a target="_blank" rel="noopener" href="https://blog.csdn.net/hunhun1122/article/details/103182718">nginx配置报错：connect() to 127.0.0.1:8080 failed (13: Permission denied) while connecting to upstream,</a></strong> ，輸入 <code>setsebool -P httpd_can_network_connect 1</code> 可能可以解決。</p>
<hr>
<h3 id="防火牆設定"><a href="#防火牆設定" class="headerlink" title="防火牆設定"></a>防火牆設定</h3><p>當我們都佈置好前後端專案以及資料庫後，有一些 Port 號是從外面就會去訪問的，如果防火牆沒有開，可能會出現以下</p>
<p><img src="/images/others/loading.gif" data-original="/images/20250218/semanage-port-list.png" alt="Semanage Port List"></p>
<h4 id="解決方案一"><a href="#解決方案一" class="headerlink" title="解決方案一"></a>解決方案一</h4><p>這時候可以輸入 <code>semanage port --list</code> 然後再用 <code>ALT + F</code> 或 <code>command + F</code> 找尋 <strong>http_port_t</strong> 這個關鍵字，看看後面的 port 是多少，基本上筆者會把 <code>3000 3306</code> 開起來。</p>
<p>如果沒有新增到的 port 號可以使用以下指令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ semanage port --add --type http_port_t --proto tcp &quot;你要新增的 Port 號&quot;</span><br></pre></td></tr></table></figure>

<h4 id="解決方案二"><a href="#解決方案二" class="headerlink" title="解決方案二"></a>解決方案二</h4><p><img src="/images/others/loading.gif" data-original="/images/20250218/firewall-cmd-list-all.png" alt="Firewall Cmd List All"></p>
<p>也可以透過使用 <code>firewall-cmd --list-all</code> 去查詢，看看 <strong>ports</strong> 有沒有開到，如果沒有就使用以下指令， <strong>3306</strong> 可以自行更換</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ firewall-cmd --zone=public --add-port=3306/tcp --permanent</span><br><span class="line">$ firewall-cmd --reload</span><br></pre></td></tr></table></figure>

<h4 id="關於服務設定"><a href="#關於服務設定" class="headerlink" title="關於服務設定"></a>關於服務設定</h4><p>另外因為防火牆也會阻擋一些服務，在使用 <code>firewall-cmd --reload</code> 的時候可以順便看一下 services 有沒有包含 <code>https mysql ssh</code>，如果沒有請使用以下指令， <strong>mysql</strong> 可以自行替換</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ firewall-cmd --permanent --zone=public --add-service=mysql</span><br><span class="line">$ firewall-cmd --reload</span><br></pre></td></tr></table></figure>

<p><img src="/images/others/loading.gif" data-original="/images/20250218/ssh-connect-refused.png" alt="SSH Connect Refused"></p>
<p>像是上圖的狀況也是因為 <strong>SSH Service</strong> 沒有開啟 <strong>SSH</strong> 的服務允許。</p>
<hr>
<h3 id="配置-SSL"><a href="#配置-SSL" class="headerlink" title="配置 SSL"></a>配置 SSL</h3><p>基本上現在網站都會需要 <strong>SSL</strong> ，這邊要借用就文章的描述。</p>
<p>到這邊大致完成了，揭著我們必須讓我們的網址可以吃 <strong>443</strong> ，也就是 <strong>https</strong> ，有興趣可以參考 <strong><a target="_blank" rel="noopener" href="https://tw.alphacamp.co/blog/http-https-difference">一文搞懂 HTTP 和 HTTPS 是什麼？兩者有什麼差別</a></strong> ，簡單說最明顯的就是如果網站不是 <strong>443(https)</strong> 頁面左上角就會出現不安全。</p>
<p>而通常 <strong>SSL</strong> 是需要用買的，但這邊我們要當個免費仔(放心不是破解)，而免費缺點是三個月需要更新一次，但別擔心各路大神都幫我們想好了怎麼自動更新憑證。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ dnf install certbot</span><br></pre></td></tr></table></figure>

<p><img src="/images/others/loading.gif" data-original="/images/20250218/install-certbot.png" alt="Install Certbot"></p>
<p>這時候可能會出現上圖錯誤，如果有就請參考 <strong><a target="_blank" rel="noopener" href="https://www.nihaodanqing.com/linux/CentOS-Stream-release-9-ru-he-an-zhuang-certbot.html">CentOS Stream release 9如何安装certbot</a></strong> ，或者使用以下指令，主要是因為 <strong>CentOS Stream 9</strong> 默認 <strong>Certbot</strong> 不可用。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ dnf install epel-release -y</span><br><span class="line">$ dnf install certbot -y</span><br><span class="line">$ dnf install python3-certbot-nginx // 如果使用 Nginx 服務器需要安裝</span><br><span class="line">$ certbot --nginx</span><br></pre></td></tr></table></figure>

<p>之後如果你的 <strong>Nginx</strong> 有更改設定檔，請一定要在執行 <code>nginx -t</code>，然後通過後要使用 <code>certbot --nginx</code>，這樣才會有該網域的憑證。</p>
<p>產生成功會出現 <code>Congratulations! You have successfully enabled &quot;憑證網址&quot;</code>。</p>
<p><img src="/images/others/loading.gif" data-original="/images/20250218/vi-etc-crontab.png" alt="vi etc crontab"></p>
<p>因為憑證會有時效期限，我們不太可能會常常手動去更新，所以這邊我們要輸入 <code>vi /etc/crontab</code>，然後進去在最下面新增下面的內容，如上圖</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># let&#x27;s encrypt</span><br><span class="line">0 */8 * * * root python -c &#x27;import random; import time; time.sleep(random.random() * 3600)&#x27; &amp;&amp; certbot renew &gt; /tmp/cert-bot_renew.log</span><br></pre></td></tr></table></figure>

<p>接著儲存檔案，然後輸入 <code>service crond restart</code>，至此就會 <strong>每天檢查三次(00:00 08:00 16:00)</strong> 。</p>
<p><img src="/images/others/loading.gif" data-original="/images/20250218/500-error.png" alt="500 Error"></p>
<p><strong>極重要：因為在輸入 certbot –nginx 的時候，程式會去依照你設定的 nginx config 訪問你的網站，如果你之前的防火牆沒有開啟 http，會有可能訪問不到，請記得輸入 <code>firewall-cmd --permanent --zone=public --add-service=http</code>，後續新增成功看要不要再關掉都可以，筆者在這邊卡很久很久很久很久很久很久…，記得出現問題找不到就一直回去看 nginx error log 就對了！</strong></p>
<hr>
<h3 id="關於權限問題"><a href="#關於權限問題" class="headerlink" title="關於權限問題"></a>關於權限問題</h3><p>如果有碰到畫面顯示不了，資料庫連不上，皆有可能是資料庫問題，權限問題在前面提過，不外乎就是查看</p>
<ul>
<li>firewall-cmd –list-all</li>
<li>semanage port –list</li>
</ul>
<p>看看防火牆啦，或是 <strong>Port</strong> 有沒有開，如果真沒有頭緒，一切還是要從 <strong>nginx</strong> 的 <strong>error.log</strong> 來看，可以看上面文章有提到怎麼找到 <strong>error.log</strong></p>
<hr>
<h3 id="額外問題"><a href="#額外問題" class="headerlink" title="額外問題"></a>額外問題</h3><p><img src="/images/others/loading.gif" data-original="/images/20250218/gsmtp-error.png" alt="gsmtp"></p>
<p>假如你的專案有使用 <strong>GSMTP</strong> ，也要記得開啟服務，開啟 <strong>Port</strong> ，然後密碼記得至 <strong>Google</strong> 申請一組密碼</p>
<p><img src="/images/others/loading.gif" data-original="/images/20250218/account.png" alt="Google Account"></p>
<p>找到你要寄信的那組 <strong>Gmail Account</strong> ，點擊 <strong>管理你的 Google 帳戶</strong></p>
<p><img src="/images/others/loading.gif" data-original="/images/20250218/security.png" alt="Security"></p>
<p>在點擊 <strong>安全性 &gt; 兩步驟驗證</strong></p>
<p><img src="/images/others/loading.gif" data-original="/images/20250218/two-step.png" alt="Two Step"></p>
<p>然後往下滑點擊應用程式密碼</p>
<p><img src="/images/others/loading.gif" data-original="/images/20250218/password.png" alt="Password"></p>
<p>最後點擊產生密碼，記得一定要將這十六個英文字存下來，之後再打開這個頁面就不能再看到了。</p>
<hr>
<h2 id="Conclusion-結論"><a href="#Conclusion-結論" class="headerlink" title="Conclusion &amp; 結論"></a>Conclusion &amp; 結論</h2><p>這次因為重新啟動一台伺服器，所以重新再跑一次安裝流程，過程很多東西又重新釐清，也碰到新的問題，不過大致上都脫離不了權限、防火牆，如果有問題基本上丟到 <strong>Google</strong> 都能解決，希望這篇筆記能幫助到一些也在部署的朋友。</p>
<hr>
<h2 id="參考網站"><a href="#參考網站" class="headerlink" title="參考網站"></a>參考網站</h2><ul>
<li><a target="_blank" rel="noopener" href="https://support.cpanel.net/hc/en-us/articles/360058490254--CentOS-6-End-of-Life-Notice">CentOS 6 - End of Life Notice</a></li>
<li><a target="_blank" rel="noopener" href="https://notjustdesigner.com/choose-domain-registrar/">【建站教學#3】如何選擇網域商？2021前六大網域商比較</a></li>
<li><a target="_blank" rel="noopener" href="https://www.fuwu7.com/overseas-vps/6014.html">2025年国外VPS排行榜：前十名最好的国外VPS排名</a></li>
<li><a target="_blank" rel="noopener" href="https://ithelp.ithome.com.tw/articles/10277498">Day21：【技術篇】SSH 的基本運作原理</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_35995691/article/details/143378707">CentOS 9 Stream 上安装 Git</a></li>
<li><a target="_blank" rel="noopener" href="https://reintech.io/blog/installing-configuring-git-centos-9">Installing and Configuring Git on CentOS 9</a></li>
<li><a target="_blank" rel="noopener" href="https://tecadmin.net/how-to-install-nvm-on-centos-stream-9/">How to Install NVM on CentOS Stream 9 &amp; RHEL 9</a></li>
<li><a target="_blank" rel="noopener" href="https://wiki.crowncloud.net/?How_to_Install_Node_JS_on_CentOS_Stream_9">How to Install Node.js on CentOS Stream 9</a></li>
<li><a target="_blank" rel="noopener" href="https://www.hostinger.com/tutorials/how-to-install-mysql-on-centos">How to Install MySQL on CentOS 9 Stream</a></li>
<li><a target="_blank" rel="noopener" href="https://reintech.io/blog/secure-mysql-installation-centos-9">Secure MySQL Installation on CentOS 9</a></li>
<li><a target="_blank" rel="noopener" href="https://titangene.github.io/article/nvm.html">nvm：安裝、切換不同 Node.js 版本的管理器</a></li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/50177216/how-to-grant-all-privileges-to-root-user-in-mysql-8-0">How to grant all privileges to root user in MySQL 8.0</a></li>
<li><a target="_blank" rel="noopener" href="https://tw.alphacamp.co/blog/http-https-difference">一文搞懂 HTTP 和 HTTPS 是什麼？兩者有什麼差別</a></li>
<li><a target="_blank" rel="noopener" href="https://www.nihaodanqing.com/linux/CentOS-Stream-release-9-ru-he-an-zhuang-certbot.html">CentOS Stream release 9如何安装certbot</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/hunhun1122/article/details/103182718">nginx配置报错：connect() to 127.0.0.1:8080 failed (13: Permission denied) while connecting to upstream,</a></li>
</ul>

    </div>

    
    
    
        <div class="reward-container">
  <div></div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    捐贈
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/others/bitcoin.png" alt="RexHung 比特幣">
        <p>比特幣</p>
      </div>

  </div>
</div>


      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/Note/" rel="tag"><i class="fa fa-tag"></i> Note</a>
              <a href="/tags/Third-party-service/" rel="tag"><i class="fa fa-tag"></i> Third party service</a>
              <a href="/tags/Linode/" rel="tag"><i class="fa fa-tag"></i> Linode</a>
              <a href="/tags/DigitalOcean/" rel="tag"><i class="fa fa-tag"></i> DigitalOcean</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2024/11/27/20241127/" rel="prev" title="[Hexschool Backend experience camp] — 資料庫體驗營 每日任務串">
      <i class="fa fa-chevron-left"></i> [Hexschool Backend experience camp] — 資料庫體驗營 每日任務串
    </a></div>
      <div class="post-nav-item">
    <a href="/2025/03/09/20250309/" rel="next" title="[Tool Note] — 透過 Webpack 發布 React.js(TypeScript) 元件至 npm">
      [Tool Note] — 透過 Webpack 發布 React.js(TypeScript) 元件至 npm <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    
  <div class="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目錄
        </li>
        <li class="sidebar-nav-overview">
          本站概要
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Introduction-%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">Introduction &amp; 前言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Summary-%E6%91%98%E8%A6%81"><span class="nav-number">2.</span> <span class="nav-text">Summary &amp; 摘要</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B6%B2%E5%9F%9F%E9%83%A8%E5%88%86"><span class="nav-number">2.1.</span> <span class="nav-text">網域部分</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BB%E6%A9%9F%E5%8F%8A%E9%83%A8%E7%BD%B2"><span class="nav-number">2.2.</span> <span class="nav-text">主機及部署</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B0%E5%A2%9ESSH"><span class="nav-number">2.3.</span> <span class="nav-text">新增SSH</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%97%9C%E6%96%BC%E6%9C%AC%E6%A9%9F%E9%80%A3%E4%B8%8D%E4%B8%8A"><span class="nav-number">2.3.1.</span> <span class="nav-text">關於本機連不上</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BB%BA%E7%BD%AE%E7%92%B0%E5%A2%83"><span class="nav-number">2.4.</span> <span class="nav-text">建置環境</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%9C%E6%96%BCNginx"><span class="nav-number">2.5.</span> <span class="nav-text">關於Nginx</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%93%E5%8F%96%E5%B0%88%E6%A1%88"><span class="nav-number">2.6.</span> <span class="nav-text">抓取專案</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E8%B3%87%E6%96%99%E5%BA%AB"><span class="nav-number">2.7.</span> <span class="nav-text">配置資料庫</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B3%87%E6%96%99%E5%BA%AB%E9%80%A3%E4%B8%8D%E4%B8%8A"><span class="nav-number">2.7.1.</span> <span class="nav-text">資料庫連不上</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%98%B2%E7%81%AB%E7%89%86%E8%A8%AD%E5%AE%9A"><span class="nav-number">2.8.</span> <span class="nav-text">防火牆設定</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A7%A3%E6%B1%BA%E6%96%B9%E6%A1%88%E4%B8%80"><span class="nav-number">2.8.1.</span> <span class="nav-text">解決方案一</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A7%A3%E6%B1%BA%E6%96%B9%E6%A1%88%E4%BA%8C"><span class="nav-number">2.8.2.</span> <span class="nav-text">解決方案二</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%97%9C%E6%96%BC%E6%9C%8D%E5%8B%99%E8%A8%AD%E5%AE%9A"><span class="nav-number">2.8.3.</span> <span class="nav-text">關於服務設定</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE-SSL"><span class="nav-number">2.9.</span> <span class="nav-text">配置 SSL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%9C%E6%96%BC%E6%AC%8A%E9%99%90%E5%95%8F%E9%A1%8C"><span class="nav-number">2.10.</span> <span class="nav-text">關於權限問題</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A1%8D%E5%A4%96%E5%95%8F%E9%A1%8C"><span class="nav-number">2.11.</span> <span class="nav-text">額外問題</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Conclusion-%E7%B5%90%E8%AB%96"><span class="nav-number">3.</span> <span class="nav-text">Conclusion &amp; 結論</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%83%E8%80%83%E7%B6%B2%E7%AB%99"><span class="nav-number">4.</span> <span class="nav-text">參考網站</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="RexHung"
      src="/images/profile/profile_2.png">
  <p class="site-author-name" itemprop="name">RexHung</p>
  <div class="site-description" itemprop="description">努力不一定會成功, 不努力一定很輕鬆！</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">81</span>
          <span class="site-state-item-name">文章</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">52</span>
        <span class="site-state-item-name">分類</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">86</span>
        <span class="site-state-item-name">標籤</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/RexHung0302" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;RexHung0302" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/Zeee_Hung" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;Zeee_Hung" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.facebook.com/ze.hung" title="FB Page → https:&#x2F;&#x2F;www.facebook.com&#x2F;ze.hung" rel="noopener" target="_blank"><i class="fab fa-facebook fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.linkedin.com/in/chiatse-hung-908b72204/" title="Linked → https:&#x2F;&#x2F;www.linkedin.com&#x2F;in&#x2F;chiatse-hung-908b72204&#x2F;" rel="noopener" target="_blank"><i class="fab fa-linkedin fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.cake.me/me/RexHung" title="CakeResume → https:&#x2F;&#x2F;www.cake.me&#x2F;me&#x2F;RexHung" rel="noopener" target="_blank"><i class="fas fa-birthday-cake fa-fw"></i></a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">RexHung0302 - 轉載文章時請附上作者(RexHung)及原文連結(URL)，感謝配合！</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 強力驅動
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/disqusjs@1/dist/disqusjs.css">

<script>
NexT.utils.loadComments(document.querySelector('#disqus_thread'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/disqusjs@1/dist/disqus.js', () => {
    window.dsqjs = new DisqusJS({
      api       : '' || 'https://disqus.com/api/',
      apikey    : '6dmTPprC4xIxNcqr3Gi1OHUEoMpwUbUOLi0qQ8BBuAudO2qzoJIfPMMX3Sel7UJE',
      shortname : 'rexhung0302',
      url       : "https://rexhung0302.github.io/2025/02/18/20250218/",
      identifier: "2025/02/18/20250218/",
      title     : "[Third party service Note] - 全端手動部署 VPS(VM) 踩坑全記錄 By Vue + Node.js + Nginx + MySQL8 + CentOS Stream 9",
    });
  }, window.DisqusJS);
});
</script>


        <style>
            [bg-lazy] {
                background-image: none !important;
                background-color: #eee !important;
            }
        </style>
        <script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 1,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z\d\-\.\+]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(t.test(e.href)||r.test(e.href))&&(e.href=a.dataset.original)})});</script><script>(r=>{r.imageLazyLoadSetting.processImages=t;var a=r.imageLazyLoadSetting.isSPA,o=r.imageLazyLoadSetting.preloadRatio||1,d=i();function i(){var t=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")),e=Array.prototype.slice.call(document.querySelectorAll("[bg-lazy]"));return t.concat(e)}function t(t){(a||t)&&(d=i());for(var e,n=0;n<d.length;n++)0<=(e=(e=d[n]).getBoundingClientRect()).bottom&&0<=e.left&&e.top<=(r.innerHeight*o||document.documentElement.clientHeight*o)&&(()=>{var t,e,a,o,i=d[n];e=function(){d=d.filter(function(t){return i!==t}),r.imageLazyLoadSetting.onImageLoaded&&r.imageLazyLoadSetting.onImageLoaded(i)},(t=i).dataset.loaded||(t.hasAttribute("bg-lazy")?(t.removeAttribute("bg-lazy"),e&&e()):(a=new Image,o=t.getAttribute("data-original"),a.onload=function(){t.src=o,t.removeAttribute("data-original"),t.setAttribute("data-loaded",!0),e&&e()},a.onerror=function(){t.removeAttribute("data-original"),t.setAttribute("data-loaded",!1),t.src=o},t.src!==o&&(a.src=o)))})()}function e(){clearTimeout(t.tId),t.tId=setTimeout(t,500)}t(),document.addEventListener("scroll",e),r.addEventListener("resize",e),r.addEventListener("orientationchange",e)})(this);</script></body>
</html>
